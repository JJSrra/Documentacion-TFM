\chapter{Diseño experimental}

En este capítulo se abordarán todas las cuestiones relativas a la fase de experimentación del estudio, desde las primeras tomas de decisiones a la hora de formar grupos hasta las métricas elegidas para validar las soluciones. A lo largo de los siguientes párrafos se darán argumentos que defiendan las posturas que se han tenido que tomar y se dará una visión suficientemente detallada del experimento para que los resultados sean fácilmente interpretables.

En términos generales, el experimento transcurrirá a lo largo de las siguientes fases:

\begin{enumerate}
	\item \textbf{Elección del conjunto de datos.} El primer paso necesario es seleccionar un conjunto de datos que se adecúe al objetivo del estudio; en este caso, que cuente con una buena cantidad de películas y valoraciones para poder llevar a cabo el estudio sobre sistemas de recomendación a grupos en este ámbito.
	\item \textbf{Creación de grupos.} Para llevar a cabo el experimento es necesario definir sobre qué grupos se va a trabajar y crearlos desde un primer momento, para así experimentar sobre los mismos grupos pero en diferentes métodos de recomendación. Se utilizarán dos estrategias distintas a la hora de crear grupos.
	\item \textbf{Guardado de información reutilizable de interés.} Para el funcionamiento de algunos de los métodos, o como herramienta útil en algún procesamiento interno, se guardarán algunos datos estáticos tras haberlos calculado una única vez, y no tener que emplear tiempo de ejecución innecesario cada vez que se repita el experimento. Entre estos datos se encuentran los grupos formados, pero también la matriz de correlación de Pearson o las valoraciones de cada usuario.
	\item \textbf{Filtrado de películas evaluables para cada grupo.} Al haber una gran cantidad de películas, muchas de las que ocupan el conjunto de validación pueden no haber sido vistas por ninguno de los miembros del grupo, siendo en este caso absurdo hacerlas formar parte del experimento pues no existen datos reales con los que validar la recomendación. Más adelante se especificará más concretamente qué criterio se ha seguido para escoger las películas de cada grupo.
	\item \textbf{Elección de métricas de evaluación.} Puesto que en este experimento se cuenta con soluciones en formato de ranking, existen métricas especiales capaces de interpretar mejor la bondad de una solución de este tipo. Se deben tomar también decisiones acerca de qué métricas dejar de lado por no adaptarse bien al problema en cuestión, a pesar de que puedan aparecer en otras publicaciones relacionadas.
	\item \textbf{Evaluación de los métodos del estudio.} Primero se ha de comprobar el algoritmo base, conocido como \textit{baseline}, a continuación se comprueba que la implementación del estado del arte funciona correctamente y por último se desarrollan y se evalúan las nuevas propuestas planteadas.
	\item \textbf{Extracción de resultados.} Los resultados de las distintas evaluaciones deben ser recopilados y guardados adecuadamente, a fin de poder reproducirlos más adelante en formato de gráficas o tablas que ayuden a defender las conclusiones del estudio.
\end{enumerate}

A continuación se realizará un recorrido fase por fase explicando con más precisión los distintos conceptos que se han de tener en cuenta y los factores que han propiciado decantarse por una alternativa u otra en cada caso.

\section{Elección del conjunto de datos}

Cuando se trata de evaluar un sistema de recomendación de películas, existe un conjunto de datos por excelencia que sobresale con respecto al resto: se trata de la base de datos de \textbf{MovieLens} \cite{movielens} \cite{movielens-paper}. MovieLens es un recomendador de películas utilizado en investigación por la Universidad de Minnesota, y cuenta con un contrastado bagaje ya que lleva apareciendo en publicaciones desde prácticamente los inicios de los sistemas de recomendación. Sin ir más lejos, el primer sistema de recomendación a grupos, PolyLens \cite{polylens}, se basaba en esta base de datos.

Al ser mantenido por un grupo investigador, MovieLens ofrece una amplia variedad de bases de datos con las que trabajar, más pequeñas o más grandes, y desde las más antiguas datadas de 1998 hasta las más nuevas, que se actualizan con el tiempo. De acuerdo a la información extraída de su página web, las bases de datos más antiguas son estables, pero las más nuevas son más recomendables para trabajos universitarios e investigaciones.

En base al contrastado uso de MovieLens en labores de investigación, se ha decidido escogerlo como conjunto de datos sobre el que realizar el experimento. En particular, se ha trabajado con la base de datos \textit{100K}, que cuenta con 100.836 valoraciones aplicadas sobre 9.742 películas por 610 usuarios. Estas valoraciones se obtuvieron entre marzo de 1996 y septiembre de 2018, de cuando data el conjunto en el momento de la documentación de este trabajo. El contenido descargable se compone de 4 archivos de extensión \textit{.csv}, de los cuales para este estudio solo se han requerido \textit{ratings.csv} y \textit{movies.csv}, que contienen la información acerca de las películas (nombre, año) y de las valoraciones que los usuarios han dado a qué películas.

Para el estudio se requiere que exista un conjunto de entrenamiento y uno de validación, que será con respecto al que se realizarán las recomendaciones y que deberán contrastarse con los resultados reales. Para realizar la división, se ha hecho una partición 80-20, realizando una permutación aleatoria de las 9.742 películas y asignando el 80\% al conjunto de entrenamiento (7794 películas) y el 20\% restante al conjunto de validación (1948 películas).